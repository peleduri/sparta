name: Sparta - Self-Scan Repository

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  schedule:
    # Run weekly on Sundays at 3 AM UTC
    - cron: '0 3 * * 0'
  workflow_dispatch:

jobs:
  scan-sparta:
    name: Scan Sparta for Vulnerabilities
    uses: ./.github/workflows/sparta-package-vulnerability-scan.yml
    with:
      scan-ref: '.'
      severity: 'CRITICAL,HIGH'
      exit-code: '1'

